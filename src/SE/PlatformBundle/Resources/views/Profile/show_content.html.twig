{% trans_default_domain 'FOSUserBundle' %}

  <div class="row">

      <div class="col-sm-7">
        <div class="rating-block">
          <div class="row">
          <div class="col-sm-6">
            <h4><i class="glyphicon glyphicon-user se-user-icon"></i> <span>{{user}}</span></h4>
            {% if user.rate != -1 %}
                <h2 class="bold padding-bottom-7">{{user.rate}} <small>/ 5 - {{ listComment|length }} avis</small></h2>
                {{ include('@SEPlatform/User/rate2.html.twig', {'item': user }) }}
            {% else %}
            <h2 class="bold padding-bottom-7"><small>Pas encore noté</small></h2>
            {{ include('@SEPlatform/User/rate2.html.twig', {'item': user }) }}
            {% endif %}
          </div>
          <div class="col-sm-6">
            <h4>Synthèse des avis reçus</h4>
            <div class="pull-left">
              <div class="pull-left" style="width:35px; line-height:1;">
                <div style="height:9px; margin:5px 0;">5 <span class="glyphicon glyphicon-star"></span></div>
              </div>
              <div class="pull-left" style="width:180px;">
                <div class="progress" style="height:9px; margin:8px 0;">
                  <div class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="5" aria-valuemin="0" aria-valuemax="5" style="width: 1000%">
                  <span class="sr-only">80% Complete (danger)</span>
                  </div>
                </div>
              </div>
              <div class="pull-right" style="margin-left:10px;">{{ render(controller('SEPlatformBundle:Comment:countRate', { 'rate': '5', 'user': user.id })) }}</div>
            </div>
            <div class="pull-left">
              <div class="pull-left" style="width:35px; line-height:1;">
                <div style="height:9px; margin:5px 0;">4 <span class="glyphicon glyphicon-star"></span></div>
              </div>
              <div class="pull-left" style="width:180px;">
                <div class="progress" style="height:9px; margin:8px 0;">
                  <div class="progress-bar progress-bar-primary" role="progressbar" aria-valuenow="4" aria-valuemin="0" aria-valuemax="5" style="width: 80%">
                  <span class="sr-only">80% Complete (danger)</span>
                  </div>
                </div>
              </div>
              <div class="pull-right" style="margin-left:10px;">{{ render(controller('SEPlatformBundle:Comment:countRate', { 'rate': '4', 'user': user.id })) }}</div>
            </div>
            <div class="pull-left">
              <div class="pull-left" style="width:35px; line-height:1;">
                <div style="height:9px; margin:5px 0;">3 <span class="glyphicon glyphicon-star"></span></div>
              </div>
              <div class="pull-left" style="width:180px;">
                <div class="progress" style="height:9px; margin:8px 0;">
                  <div class="progress-bar progress-bar-info" role="progressbar" aria-valuenow="3" aria-valuemin="0" aria-valuemax="5" style="width: 60%">
                  <span class="sr-only">80% Complete (danger)</span>
                  </div>
                </div>
              </div>
              <div class="pull-right" style="margin-left:10px;">
              {{ render(controller('SEPlatformBundle:Comment:countRate', { 'rate': '3', 'user': user.id })) }}
            </div>
          </div>
          <div class="pull-left">
            <div class="pull-left" style="width:35px; line-height:1;">
              <div style="height:9px; margin:5px 0;">2 <span class="glyphicon glyphicon-star"></span></div>
            </div>
            <div class="pull-left" style="width:180px;">
              <div class="progress" style="height:9px; margin:8px 0;">
                <div class="progress-bar progress-bar-warning" role="progressbar" aria-valuenow="2" aria-valuemin="0" aria-valuemax="5" style="width: 40%">
                <span class="sr-only">80% Complete (danger)</span>
                </div>
              </div>
            </div>
            <div class="pull-right" style="margin-left:10px;">{{ render(controller('SEPlatformBundle:Comment:countRate', { 'rate': '2', 'user': user.id })) }}</div>
          </div>
          <div class="pull-left">
            <div class="pull-left" style="width:35px; line-height:1;">
              <div style="height:9px; margin:5px 0;">1 <span class="glyphicon glyphicon-star"></span></div>
            </div>
            <div class="pull-left" style="width:180px;">
              <div class="progress" style="height:9px; margin:8px 0;">
                <div class="progress-bar progress-bar-danger" role="progressbar" aria-valuenow="1" aria-valuemin="0" aria-valuemax="5" style="width: 20%">
                <span class="sr-only">80% Complete (danger)</span>
                </div>
              </div>
            </div>
            <div class="pull-right" style="margin-left:10px;">{{ render(controller('SEPlatformBundle:Comment:countRate', { 'rate': '1', 'user': user.id })) }}</div>
          </div>
        </div>
      </div>
            <hr>
            <h5>En quelques mots...</h5>
            <p class="info">
             {% if user.isAcountComplete == 1 %}
                  {% if user.detail %}
                     {{ user.detail|nl2br }}
                      {% else %}
                        {{user}} n'a pas renseigné cette partie.
                      {% endif %}
                {% endif %}
            </p>
            {% if user.isAcountComplete == 1 and user.detail  %}
            <a
                 type="button"
                 class="cat-link"
                 data-toggle="modal"
                 role="button"
                 data-toggle="modal"
                 data-target="#modalDetailShow"
                 >
               + d'infos
            </a>
            {% endif %}
          </div>
      </div>
      <div class="col-sm-5">
        <div class="rating-block">
          <h5>Activité</h5>
          <p>Dernière connexion : {{ user.lastLogin|date('d/m/Y') }}</p>
          <p>Membre depuis : {{ user.dateCreation|date('d/m/Y') }}</p>
            <hr>
            <h5>Détail</h5>
            {% if user.accountType == 'Society' %}
            <p>
               Statut : Professionnel (SIRET : {{user.siret}})
           </p>
             {% elseif user.accountType == 'Particular' %}
              <p>
                 Statut : Particulier
               </p>
            {% endif %}
        <p>Ville : {{ user.PostalCode.value }} {{ user.PostalCode.city.labelNormal }}
                      ({{ user.PostalCode.city.departement.labelNormal }})
        </p>
        <p>Tél : {{ user.phoneNumber|split('', 2)|join(' ') }}</p>
        <p>Disponibilité :
        {% for daycal in calendar %}
              <span class="label label-default{% if daycal in user.calendar %} label-success{% else %} badge-disable{% endif %}">{{ daycal.dayFrAbbr }}</span>
                {% endfor %}</p>
        <p>Mode de paiement accepté :
            {% for pay in user.payment %}
            <span class="label label-success">{{ pay.labelNormal }}</span>
            {% else %}
              Me contacter
            {% endfor %}
        </p>
        </div>
      </div>
  </div>
  <hr>
    <div class="row">

      <div class="col-sm-7">

        {% for comment in listComment %}
              <div class="review-block">
                <div class="row">
                  <div class="col-sm-3">
                    <i class="glyphicon glyphicon-user se-user-icon"></i>
                    <div class="review-block-name"><a class='cat-link' href="{{ path('se_platform_user_view', { 'userId': comment.sender.id}) }}">{{ comment.sender }}</a></div>
                    <div class="review-block-date">{{ comment.dateCreation|date('d/m/Y') }}</div>
                  </div>
                  <div class="col-sm-9">
                      <div class="review-block-rate">
                        {{ include('@SEPlatform/User/small-rate.html.twig', {'item': comment }) }}
                      </div>
                      <div class="review-block-title">{{ comment.advert.title }}</div>
                      <div class="review-block-description"><h5>{{ comment.content |nl2br }}</h5></div>
                  </div>
                </div>
              </div>
        {% endfor %}

    </div>


      <div class="col-sm-5">
        {% if is_granted("IS_AUTHENTICATED_REMEMBERED") and user == app.user %}
        {% else %}
        <div class="rating-block">
          Contactez {{user}}
          <h5></h5>
          <form id="form_send_message" action="" method="get">
          <div id="profil_message">
            <div class="form-group">
              <input
                  type="text"
                  class="form-control"
                  id="name_sender"
                  name="_name_sender"
                  value="{% if is_granted("IS_AUTHENTICATED_REMEMBERED") %}{{app.user}} {% endif %}"
                  placeholder="Votre nom" required="required"
                  {% if is_granted("IS_AUTHENTICATED_REMEMBERED") %} disabled {% endif %} >
                  </div>
                  <div class="form-group">

                  <input
                      type="email"
                      class="form-control"
                      id="email_sender"
                      name="_email_sender"
                      value="{% if is_granted("IS_AUTHENTICATED_REMEMBERED") %}{{app.user.Email}} {% endif %}"
                      placeholder="Votre adresse mail" required="required"
                      {% if is_granted("IS_AUTHENTICATED_REMEMBERED") %} disabled {% endif %} >
            </div>
            <div class="form-group">
              <textarea id="profil_message_content" name="_profil_message_content" required="required" maxlength="1000" placeholder="Ecrivez votre message ici (1000 caratères maximum)" class="form-control"></textarea>
            </div>
            <div class="form-group">
              <input class="btn btn-primary" type="submit" value="Envoyer"  />
            </div>
          </div>
      </div>
        {% endif %}
      </div>
</div>
  <div class="modal fade"
       id="modalDetailShow"
       tabindex="-1"
       role="dialog"
       aria-labelledby="modalDetailShow">
          <div class="modal-dialog" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
              <h4 class="modal-title" id="myModalLabel">Détail de {{user}}</h4>
            </div>
            <div class="modal-body text-center">
             <p class="pad-msg text-left">
             {% if user.isAcountComplete == 1 and user.detail %}
                     {{ user.detail|nl2br }}
                      {% else %}
                        {{user}} n'a pas renseigné cette partie.
                      {% endif %}
             </p>

             <button type="button" class="btn btn-primary" data-dismiss="modal" aria-label="Close">Fermer</button>

            </div>
          </div>
        </div>
  </div>
